<?xml version="1.0" encoding="utf-8"?>
<Application
    x:Class="Mechanical_Keyboard.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Mechanical_Keyboard"
    xmlns:tb="using:H.NotifyIcon">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <XamlControlsResources xmlns="using:Microsoft.UI.Xaml.Controls" />
            </ResourceDictionary.MergedDictionaries>

            <!-- 1. Define Commands for the Tray Menu -->
            <XamlUICommand x:Key="ShowSettingsCommand" Label="Settings"/>
            <XamlUICommand x:Key="ExitApplicationCommand" Label="Exit"/>

            <!-- 2. Define the TaskbarIcon and bind its menu to the commands -->
            <tb:TaskbarIcon
                x:Key="TrayIcon"
                ToolTipText="Mechanical Keyboard"
                IconSource="Assets/TrayIcon.ico"
                LeftClickCommand="{StaticResource ShowSettingsCommand}">
                <tb:TaskbarIcon.ContextFlyout>
                    <MenuFlyout>
                        <MenuFlyoutItem Text="Settings" Command="{StaticResource ShowSettingsCommand}"/>
                        <MenuFlyoutSeparator/>
                        <MenuFlyoutItem Text="Exit" Command="{StaticResource ExitApplicationCommand}"/>
                    </MenuFlyout>
                </tb:TaskbarIcon.ContextFlyout>
            </tb:TaskbarIcon>

        </ResourceDictionary>
    </Application.Resources>
</Application>
